{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Everything about Frappe Framework Apps and ERPNext in containers.","title":"Introduction"},{"location":"build-custom-image/","text":"Clone frappe_containers and switch directory git clone https://github.com/castlecraft/frappe_containers cd frappe_containers Load custom apps through json apps.json needs to be passed in as build arg environment variable. export APPS_JSON='[ { \"url\": \"https://github.com/frappe/payments\", \"branch\": \"develop\" }, { \"url\": \"https://github.com/frappe/erpnext\", \"branch\": \"version-14\" }, { \"url\": \"https://user:password@git.example.com/project/repository.git\", \"branch\": \"main\" } ]' Note: url needs to be http(s) git url with token/auth in case of private repo. Build Image buildah build \\ --build-arg=FRAPPE_PATH=https://github.com/frappe/frappe \\ --build-arg=FRAPPE_BRANCH=version-14 \\ --build-arg=PYTHON_VERSION=3.10.5 \\ --build-arg=NODE_VERSION=16.18.0 \\ --build-arg=APPS_JSON=$APPS_JSON \\ --tag=ghcr.io/castlecraft/frappe_containers/custom:1.0.0 \\ --file=images/custom/Containerfile . Note: Use docker instead of buildah as per your setup. Make sure APPS_JSON variable has correct JSON. Make sure the --tag is valid image name that will be pushed to registry. Change --build-arg as per version of Python, NodeJS, Frappe Framework repo and branch Push image to use in yaml files Login to docker or buildah buildah login Push image buildah push ghcr.io/castlecraft/frappe_containers/custom:1.0.0 Use Kaniko Following executor args are required. Example runs locally in docker container. You can run it part of CI/CD or part of your cluster. podman run --rm -it \\ -v \"$HOME\"/.docker/config.json:/kaniko/.docker/config.json \\ gcr.io/kaniko-project/executor:latest \\ --dockerfile=images/custom/Containerfile \\ --context=git://github.com/castlecraft/frappe_containers \\ --build-arg=FRAPPE_PATH=https://github.com/frappe/frappe \\ --build-arg=FRAPPE_BRANCH=version-14 \\ --build-arg=PYTHON_VERSION=3.10.5 \\ --build-arg=NODE_VERSION=16.18.0 \\ --build-arg=APPS_JSON=$APPS_JSON \\ --destination=ghcr.io/castlecraft/frappe_containers/custom:1.0.0 More about kaniko Use Images Make sure image name is correct to be pushed to registry. After the images are pushed, you can pull them to servers to be deployed. If the registry is private, additional auth is needed.","title":"Build Custom Image"},{"location":"build-custom-image/#clone-frappe_containers-and-switch-directory","text":"git clone https://github.com/castlecraft/frappe_containers cd frappe_containers","title":"Clone frappe_containers and switch directory"},{"location":"build-custom-image/#load-custom-apps-through-json","text":"apps.json needs to be passed in as build arg environment variable. export APPS_JSON='[ { \"url\": \"https://github.com/frappe/payments\", \"branch\": \"develop\" }, { \"url\": \"https://github.com/frappe/erpnext\", \"branch\": \"version-14\" }, { \"url\": \"https://user:password@git.example.com/project/repository.git\", \"branch\": \"main\" } ]' Note: url needs to be http(s) git url with token/auth in case of private repo.","title":"Load custom apps through json"},{"location":"build-custom-image/#build-image","text":"buildah build \\ --build-arg=FRAPPE_PATH=https://github.com/frappe/frappe \\ --build-arg=FRAPPE_BRANCH=version-14 \\ --build-arg=PYTHON_VERSION=3.10.5 \\ --build-arg=NODE_VERSION=16.18.0 \\ --build-arg=APPS_JSON=$APPS_JSON \\ --tag=ghcr.io/castlecraft/frappe_containers/custom:1.0.0 \\ --file=images/custom/Containerfile . Note: Use docker instead of buildah as per your setup. Make sure APPS_JSON variable has correct JSON. Make sure the --tag is valid image name that will be pushed to registry. Change --build-arg as per version of Python, NodeJS, Frappe Framework repo and branch","title":"Build Image"},{"location":"build-custom-image/#push-image-to-use-in-yaml-files","text":"Login to docker or buildah buildah login Push image buildah push ghcr.io/castlecraft/frappe_containers/custom:1.0.0","title":"Push image to use in yaml files"},{"location":"build-custom-image/#use-kaniko","text":"Following executor args are required. Example runs locally in docker container. You can run it part of CI/CD or part of your cluster. podman run --rm -it \\ -v \"$HOME\"/.docker/config.json:/kaniko/.docker/config.json \\ gcr.io/kaniko-project/executor:latest \\ --dockerfile=images/custom/Containerfile \\ --context=git://github.com/castlecraft/frappe_containers \\ --build-arg=FRAPPE_PATH=https://github.com/frappe/frappe \\ --build-arg=FRAPPE_BRANCH=version-14 \\ --build-arg=PYTHON_VERSION=3.10.5 \\ --build-arg=NODE_VERSION=16.18.0 \\ --build-arg=APPS_JSON=$APPS_JSON \\ --destination=ghcr.io/castlecraft/frappe_containers/custom:1.0.0 More about kaniko","title":"Use Kaniko"},{"location":"build-custom-image/#use-images","text":"Make sure image name is correct to be pushed to registry. After the images are pushed, you can pull them to servers to be deployed. If the registry is private, additional auth is needed.","title":"Use Images"},{"location":"docker-swarm/","text":"","title":"Docker Swarm"},{"location":"kubernetes/","text":"","title":"Kubernetes"},{"location":"single-server/","text":"Setup using docker or podman and compose .","title":"Single Host"}]}